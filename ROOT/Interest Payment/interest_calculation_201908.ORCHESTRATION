{"job":{"components":{"2962469":{"id":2962469,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":176,"y":128,"width":32,"height":32,"inputConnectorIDs":[2962468],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"galileo file generation"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"UPDATE etl.galileo_transaction_batch_header\nSET filename = 'btrans_584_20190905_007.txt.gpg',\nfiletransmitdate = '09052019'\nWHERE recordtype = 'H'\n;\n\ntruncate table etl.galileo_transaction_batch_detail;\ninsert into etl.galileo_transaction_batch_detail(recordtype,\nrecordnumber, accountidtype, accountidentifier, transactiontype,\ntransactionsubtype, transactionamount, transactiondescription, transactionidentifier)\nwith cmc\nas\n(\n  SELECT\n    save_galileo_prn                             as galileo_prn,\n    sum(interest_payment):: numeric(18, 2)       as creditamount,\n    'Interest Posting'::varchar                  as trans_desc\n  FROM ujc.save_august_interest_aspiration\n  WHERE 1=1\n    AND interest_payment > 0\n    AND email not in (\n    SELECT email\n      FROM etl.internal_employees_20190903\n    )\n  GROUP BY galileo_prn\n)\nselect 'D' as recordtype\n     , row_number() over(order by t2.galileo_prn) as recordnumber\n     , 'R' as accountidtype\n     , t2.galileo_prn as accountidentifier\n     , 'L' as transactiontype\n     , 'MZ' as transactionsubtype\n     , t2.creditamount as transactionamount\n     , t2.trans_desc as transactiondescription\n     , 'IP_190905-' || lpad(row_number() over(order by t2.galileo_prn), 5, '0') as transactionidentifier\nfrom cmc t2\nWHERE t2.creditamount > 0\n;\n\nUPDATE etl.galileo_transaction_batch_trailer\nSET \"count\" = (SELECT count(1) from etl.galileo_transaction_batch_detail)\nWHERE recordtype = 'T'\n;\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2962474":{"id":2962474,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":176,"y":0,"width":32,"height":32,"inputConnectorIDs":[2962471],"outputSuccessConnectorIDs":[2962468],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"load internal employees"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DROP TABLE if exists etl.internal_employees_20190903;\n\nCREATE TABLE if not exists etl.internal_employees_20190903 (\n  email varchar(255) not null,\n  name varchar(255) not null,\n  device varchar(255) not null,\n  note varchar(255)\n)\n;\n\ntruncate etl.internal_employees_20190903;\n\ncopy etl.internal_employees_20190903\nfrom 's3://aspiration-datateam/dump/jchen/interests/Internal_Employees_20190903.csv'\niam_role 'arn:aws:iam::332894900161:role/RedshiftClusterRole'\ndelimiter ','\nIGNOREHEADER 1\n-- removequotes\n;\n\n\ndelete from etl.internal_employees_20190903\nwhere email='jay.j.zheng@gmail.com' and device=''\n;\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2962475":{"id":2962475,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":0,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2962471],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"2962468":{"id":2962468,"sourceID":2962474,"targetID":2962469}},"failureConnectors":{},"unconditionalConnectors":{"2962471":{"id":2962471,"sourceID":2962475,"targetID":2962474}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{},"variables":{},"grids":{}},"info":{"name":"interest_calculation_201908","description":null,"type":"ORCHESTRATION","tag":"10f1a128-b56c-49ab-bc6e-dc64ad999ca0"}}