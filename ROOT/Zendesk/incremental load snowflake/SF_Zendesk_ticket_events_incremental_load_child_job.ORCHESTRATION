{"job":{"components":{"2961472":{"id":2961472,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-158614544,"x":320,"y":0,"width":32,"height":16,"inputConnectorIDs":[2961498],"outputSuccessConnectorIDs":[2961495],"outputFailureConnectorIDs":[2961541],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Retry Zendesk api call"}}}},"visible":true},"2":{"slot":2,"name":"Number of Retries","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true},"3":{"slot":3,"name":"Retry Delay","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Short delay"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[2961540],"inputIterationConnectorIDs":[]},"2961473":{"id":2961473,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":544,"y":208,"width":32,"height":32,"inputConnectorIDs":[2961545],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure - Zendesk api call"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961474":{"id":2961474,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-32,"y":32,"width":32,"height":32,"inputConnectorIDs":[2961493],"outputSuccessConnectorIDs":[2961498],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Truncate stg table"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"truncate prod_zendesk_stg.zendesk_ticket_events_incremental_raw;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961475":{"id":2961475,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":544,"y":96,"width":32,"height":32,"inputConnectorIDs":[2961541],"outputSuccessConnectorIDs":[2961494],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2961545],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Insert error to zendesk_load_errors table"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"insert into prod_zendesk.zendesk_load_errors\n(api_type, end_point, start_time, failure_reason)\nvalues (\n  'zendesk_ticket_events_incremental', \n  'https://aspiration.zendesk.com/api/v2/incremental/ticket_events.json',\n  (SELECT\n    extract(\n        'epoch' from max(created_at)\n    )::bigint + 1 as max_timestamp\n\tFROM prod_zendesk.zendesk_ticket_events_incremental), \n  'An error occurred while staging.' \n);"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961476":{"id":2961476,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":-1946388514,"x":-208,"y":256,"width":32,"height":32,"inputConnectorIDs":[2961489],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Success 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961477":{"id":2961477,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-32,"y":128,"width":32,"height":32,"inputConnectorIDs":[2961550],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2961490],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Set new_start_time"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\nprint context.getGridVariable('v_ticket_events_grid_variables')[0][0]\n\ncontext.updateVariable('new_start_time', context.getGridVariable('v_ticket_events_grid_variables')[0][0])\n\nprint 'new_start_time', new_start_time\n"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961478":{"id":2961478,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":304,"y":240,"width":32,"height":32,"inputConnectorIDs":[2961492],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[2961547],"outputUnconditionalConnectorIDs":[2961548],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"load data from stg table to main table"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"delete from prod_zendesk.zendesk_ticket_events_incremental\nWHERE (id, child_id) in (\n    SELECT id, child_id from prod_zendesk_stg.zendesk_ticket_events_incremental\n)\n;\n\ninsert into prod_zendesk.zendesk_ticket_events_incremental\nselect * from prod_zendesk_stg.zendesk_ticket_events_incremental\n;\n\ntruncate prod_zendesk_stg.zendesk_ticket_events_incremental;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961479":{"id":2961479,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":-48,"y":256,"width":32,"height":32,"inputConnectorIDs":[2961488],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure - No more data to load"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961480":{"id":2961480,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1155583855,"x":-416,"y":32,"width":32,"height":32,"inputConnectorIDs":[2961549],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2961491],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Query start_time"}}}},"visible":true},"2":{"slot":2,"name":"Basic/Advanced","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ADW"}}}},"visible":true},"4":{"slot":4,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ZENDESK_TICKET_EVENTS_INCREMENTAL"}}}},"visible":true},"6":{"slot":6,"name":"Table Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATED_AT"}}}},"visible":true},"7":{"slot":7,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"8":{"slot":8,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"v_ticket_events_grid_variables"}}}},"visible":true},"9":{"slot":9,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATED_AT"}}}},"visible":true},"10":{"slot":10,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"1"}}}},"visible":true},"11":{"slot":11,"name":"Order By","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATED_AT"}}}},"visible":true},"12":{"slot":12,"name":"Sort","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Descending"}}}},"visible":true},"13":{"slot":13,"name":"Filter Conditions","elements":{},"visible":true},"14":{"slot":14,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true},"20":{"slot":20,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"PROD_ZENDESK"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961481":{"id":2961481,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-240,"y":32,"width":32,"height":32,"inputConnectorIDs":[2961491],"outputSuccessConnectorIDs":[2961493],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Set start_time and sleep"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\nimport time\nimport datetime\n\nprint 'len(v_ticket_events_grid_variables):', len(context.getGridVariable('v_ticket_events_grid_variables'))\n\nif len(context.getGridVariable('v_ticket_events_grid_variables')) != 0:\n  print \"assign start_time=\", context.getGridVariable('v_ticket_events_grid_variables')[0][0]\n  context.updateVariable('start_time', context.getGridVariable('v_ticket_events_grid_variables')[0][0])  \n\n# skip a page, set start_time manually\n#context.updateVariable('start_time', datetime.datetime(2014,11,12,18,18,52,0))\n#context.updateVariable('start_time', datetime.datetime(2014,11,15,21,4,20,0))\n\n#context.updateVariable('start_time', datetime.datetime(2019,3,2,17,4,40,0))\n\n#context.updateVariable('start_time', datetime.datetime(2017,6,30,19,30,23,0))\n\nprint 'start_time', start_time\n\nprint 'sleep 5 seconds'\ntime.sleep(5)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961482":{"id":2961482,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1155583855,"x":112,"y":128,"width":32,"height":32,"inputConnectorIDs":[2961548],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2961550],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Query new start_time"}}}},"visible":true},"2":{"slot":2,"name":"Basic/Advanced","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"4":{"slot":4,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ZENDESK_TICKET_EVENTS_INCREMENTAL"}}}},"visible":true},"6":{"slot":6,"name":"Table Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATED_AT"}}}},"visible":true},"7":{"slot":7,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"8":{"slot":8,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"v_ticket_events_grid_variables"}}}},"visible":true},"9":{"slot":9,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATED_AT"}}}},"visible":true},"10":{"slot":10,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"1"}}}},"visible":true},"11":{"slot":11,"name":"Order By","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATED_AT"}}}},"visible":true},"12":{"slot":12,"name":"Sort","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Descending"}}}},"visible":true},"13":{"slot":13,"name":"Filter Conditions","elements":{},"visible":true},"14":{"slot":14,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true},"20":{"slot":20,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"PROD_ZENDESK"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961483":{"id":2961483,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-576,"y":32,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2961549],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961486":{"id":2961486,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"CONDITIONAL","executionHint":"FLOW","implementationID":-1357378929,"x":-192,"y":128,"width":32,"height":32,"inputConnectorIDs":[2961490],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[2961489],"outputFalseConnectorIDs":[2961488],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"has more data to load?"}}}},"visible":true},"2":{"slot":2,"name":"Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Simple"}}}},"visible":true},"3":{"slot":3,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"start_time"},"2":{"slot":2,"type":"STRING","value":"Not"},"3":{"slot":3,"type":"STRING","value":"Equal to"},"4":{"slot":4,"type":"STRING","value":"${new_start_time}"}}}},"visible":true},"4":{"slot":4,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true},"5":{"slot":5,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961496":{"id":2961496,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":438858066,"x":448,"y":352,"width":32,"height":32,"inputConnectorIDs":[2961544],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Send Alert to Pager Duty - Zendesk"}}}},"visible":true},"2":{"slot":2,"name":"AWS Region","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"us-west-2"}}}},"visible":true},"3":{"slot":3,"name":"Topic Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"data-alerts-pagerduty-prod"}}}},"visible":true},"4":{"slot":4,"name":"Subject","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AWS Notification Message"}}}},"visible":true},"5":{"slot":5,"name":"Message","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"SF_Zendesk_ticket_events_incremental_load_child_job\" job failed."}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961497":{"id":2961497,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":332,"y":142,"width":32,"height":32,"inputConnectorIDs":[2961495],"outputSuccessConnectorIDs":[2961492],"outputFailureConnectorIDs":[2961546],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"parse_child_events"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"truncate PROD_ZENDESK_STG.ZENDESK_TICKET_EVENTS_INCREMENTAL;\n\ninsert into PROD_ZENDESK_STG.ZENDESK_TICKET_EVENTS_INCREMENTAL\n    (created_at, event_type, id, system_client, system_latitude, system_location, system_longitude, ticket_id, timestamp, updater_id, via, child_assignee_id, child_event_type, child_group_id, child_id, child_author_id, child_body, child_previous_value, child_priority, child_rel, child_requester_id, child_status, child_subject, child_type, child_via_reference_id, child_ticket_form_id, child_brand_id, child_locale_id, child_revision_id, child_plain_body, child_html_body, child_via, child_via_channel, child_via_source_from_address, child_via_source_from_name, child_via_source_from_facebook_id, child_via_source_from_profile_url, child_via_source_from_original_recipients, child_via_source_to_address, child_via_source_to_name, child_via_source_to_facebook_id, child_via_source_to_profile_url, child_via_source_rel, child_public, child_audit_id, child_tags, child_added_tags, child_removed_tags, child_attachments, child_custom_ticket_fields, child_satisfaction_score, child_satisfaction_reason_code, child_metadata)\n\nselect\n    CREATED_AT,\n    EVENT_TYPE,\n    ID,\n    SYSTEM_CLIENT,\n    SYSTEM_LATITUDE,\n    SYSTEM_LOCATION,\n    SYSTEM_LONGITUDE,\n    TICKET_ID,\n    \"TIMESTAMP\",\n    UPDATER_ID,\n    VIA,\n    replace(get_path(parse_json(VALUE), 'assignee_id'), '\"', '') as child_assignee_id,\n    replace(get_path(parse_json(VALUE), 'event_type'), '\"', '') as child_event_type,\n    replace(get_path(parse_json(VALUE), 'group_id'), '\"', '') as child_group_id,\n    replace(get_path(parse_json(VALUE), 'id'), '\"', '') as child_id,\n    replace(get_path(parse_json(VALUE), 'author_id'), '\"', '') as child_author_id,\n    left(replace(get_path(parse_json(VALUE), 'body'), '\"', ''), 65535) as child_body,\n    replace(get_path(parse_json(VALUE), 'previous_value'), '\"', '') as child_previous_value,\n    replace(get_path(parse_json(VALUE), 'priority'), '\"', '') as child_priority,\n    replace(get_path(parse_json(VALUE), 'rel'), '\"', '') as child_rel,\n    replace(get_path(parse_json(VALUE), 'requester_id'), '\"', '') as child_requester_id,\n    replace(get_path(parse_json(VALUE), 'status'), '\"', '') as child_status,\n    replace(get_path(parse_json(VALUE), 'subject'), '\"', '') as child_subject,\n    replace(get_path(parse_json(VALUE), 'type'), '\"', '') as child_type,\n    replace(get_path(parse_json(VALUE), 'via_reference_id'), '\"', '') as child_via_reference_id,\n    replace(get_path(parse_json(VALUE), 'ticket_form_id'), '\"', '') as child_ticket_form_id,\n    replace(get_path(parse_json(VALUE), 'brand_id'), '\"', '') as child_brand_id,\n    replace(get_path(parse_json(VALUE), 'locale_id'), '\"', '') as child_locale_id,\n    replace(get_path(parse_json(VALUE), 'revision_id'), '\"', '') as child_revision_id,\n    replace(get_path(parse_json(VALUE), 'plain_body'), '\"', '') as child_plain_body,\n    get_path(parse_json(VALUE), 'html_body') as child_html_body,\n    get_path(parse_json(VALUE), 'via') as child_via,\n    replace(get_path(parse_json(VALUE), 'via.channel'), '\"', '') as child_via_channel,\n    replace(get_path(parse_json(VALUE), 'via.source.from.address'), '\"', '') as child_via_source_from_address,\n    replace(get_path(parse_json(VALUE), 'via.source.from.name'), '\"', '') as child_via_source_from_name,\n    replace(get_path(parse_json(VALUE), 'via.source.from.facebook.id'), '\"', '') as child_via_source_from_facebook_id,\n    replace(get_path(parse_json(VALUE), 'via.source.from.profile.url'), '\"', '') as child_via_source_from_profile_url,\n    replace(get_path(parse_json(VALUE), 'via.source.from.original.recipients'), '\"', '') as child_via_source_from_original_recipients,\n    replace(get_path(parse_json(VALUE), 'via.source.to.address'), '\"', '') as child_via_source_to_address,\n    replace(get_path(parse_json(VALUE), 'via.source.to.name'), '\"', '') as child_via_source_to_name,\n    replace(get_path(parse_json(VALUE), 'via.source.to.facebook.id'), '\"', '') as child_via_source_to_facebook_id,\n    replace(get_path(parse_json(VALUE), 'via.source.to.profile.url'), '\"', '') as child_via_source_to_profile_url,\n    replace(get_path(parse_json(VALUE), 'via.source.rel'), '\"', '') as child_via_source_rel,\n    replace(get_path(parse_json(VALUE), 'public'), '\"', '') as child_public,\n    replace(get_path(parse_json(VALUE), 'audit_id'), '\"', '') as child_audit_id,\n    replace(get_path(parse_json(VALUE), 'tags'), '\"', '') as child_tags,\n    replace(get_path(parse_json(VALUE), 'added_tags'), '\"', '') as child_added_tags,\n    replace(get_path(parse_json(VALUE), 'removed_tags'), '\"', '') as child_removed_tags,\n    replace(get_path(parse_json(VALUE), 'attachments'), '\"', '') as child_attachments,\n    get_path(parse_json(VALUE), 'custom_ticket_fields') as child_custom_ticket_fields,\n    replace(get_path(parse_json(VALUE), 'satisfaction_score'), '\"', '') as child_satisfaction_score,\n    replace(get_path(parse_json(VALUE), 'satisfaction_reason_code'), '\"', '') as child_satisfaction_reason_code,\n    replace(get_path(parse_json(VALUE), 'metadata'), '\"', '') as child_metadata\n\nfrom PROD_ZENDESK_STG.ZENDESK_TICKET_EVENTS_INCREMENTAL_RAW,\n     lateral flatten(input => parse_json(CHILD_EVENTS), outer => true)\nwhere 1=1\n  and id != 1378973344212\n;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961499":{"id":2961499,"inputCardinality":"MANY","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":-1343684451,"x":448,"y":272,"width":32,"height":32,"inputConnectorIDs":[2961494,2961546,2961547],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2961544],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Or 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961500":{"id":2961500,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1214167305,"x":320,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Zendesk_ticket_events_incremental_load_one_page"}}}},"visible":true},"2":{"slot":2,"name":"Basic/Advanced Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true},"6":{"slot":6,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ticket_events_incremental_load_raw_no_paging"}}}},"visible":true},"7":{"slot":7,"name":"Data Selection","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"created_at"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"event_type"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"id"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"system_client"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"system_latitude"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"system_location"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"system_longitude"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"ticket_id"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"timestamp"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"updater_id"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"via"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"child_events"}}}},"visible":true},"8":{"slot":8,"name":"Data Source Filter","elements":{},"visible":true},"9":{"slot":9,"name":"Combine Filters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true},"10":{"slot":10,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT ..."}}}},"visible":false},"11":{"slot":11,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true},"12":{"slot":12,"name":"Connection Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"profilesettings"},"2":{"slot":2,"type":"STRING","value":"start_time=${start_time};url_prefix=aspiration"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"AuthScheme"},"2":{"slot":2,"type":"STRING","value":"Basic"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"User "},"2":{"slot":2,"type":"STRING","value":"jchen@aspiration.com/token"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"Password "},"2":{"slot":2,"type":"STRING","value":"k3cbcoSB8PzaLBkNn55n2c2EFybmqmllEsAHi2Gd"}}}},"visible":true},"13":{"slot":13,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ADW"}}}},"visible":true},"14":{"slot":14,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"PROD_ZENDESK_STG"}}}},"visible":true},"15":{"slot":15,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ZENDESK_TICKET_EVENTS_INCREMENTAL_RAW"}}}},"visible":true},"16":{"slot":16,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ETL"}}}},"visible":true},"17":{"slot":17,"name":"S3 Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"aspiration-etl-staging"}}}},"visible":true},"18":{"slot":18,"name":"Primary Keys","elements":{},"visible":true},"20":{"slot":20,"name":"Data Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"REST"}}}},"visible":false},"100":{"slot":100,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Zendesk_Custom"}}}},"visible":true},"499":{"slot":499,"name":"Authentication Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Other"}}}},"visible":true},"500":{"slot":500,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"501":{"slot":501,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false},"502":{"slot":502,"name":"Bearer Token","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false},"503":{"slot":503,"name":"OAuth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"504":{"slot":504,"name":"Key Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"505":{"slot":505,"name":"Key Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false},"506":{"slot":506,"name":"Add Authorization To","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Request Header"}}}},"visible":false},"1001":{"slot":1001,"name":"","elements":{},"visible":false},"1013":{"slot":1013,"name":"Auto Debug","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}}},"visible":true},"1014":{"slot":1014,"name":"Debug Level","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"2"}}}},"visible":true},"1992":{"slot":1992,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false},"1993":{"slot":1993,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"1994":{"slot":1994,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"1995":{"slot":1995,"name":"Stage Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false},"1996":{"slot":1996,"name":"Stage Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false},"1997":{"slot":1997,"name":"New Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"1998":{"slot":1998,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false},"1999":{"slot":1999,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false},"2000":{"slot":2000,"name":"Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Standard"}}}},"visible":true},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":true},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"40501":{"slot":40501,"name":"","elements":{},"visible":false},"40502":{"slot":40502,"name":"Load Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":""}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"Gzip"}}}},"visible":true},"63319":{"slot":63319,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":false},"63320":{"slot":63320,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"63321":{"slot":63321,"name":"Blob Container","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"63322":{"slot":63322,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"84533":{"slot":84533,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88340":{"slot":88340,"name":"","elements":{},"visible":false},"88341":{"slot":88341,"name":"Staging","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Existing Amazon S3 Location"}}}},"visible":true},"88342":{"slot":88342,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":true},"88343":{"slot":88343,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88344":{"slot":88344,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"88345":{"slot":88345,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Custom]"}}}},"visible":true},"98776":{"slot":98776,"name":"GCS Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[2961540]}},"successConnectors":{"2961492":{"id":2961492,"sourceID":2961497,"targetID":2961478},"2961493":{"id":2961493,"sourceID":2961481,"targetID":2961474},"2961494":{"id":2961494,"sourceID":2961475,"targetID":2961499},"2961495":{"id":2961495,"sourceID":2961472,"targetID":2961497},"2961498":{"id":2961498,"sourceID":2961474,"targetID":2961472}},"failureConnectors":{"2961541":{"id":2961541,"sourceID":2961472,"targetID":2961475},"2961546":{"id":2961546,"sourceID":2961497,"targetID":2961499},"2961547":{"id":2961547,"sourceID":2961478,"targetID":2961499}},"unconditionalConnectors":{"2961490":{"id":2961490,"sourceID":2961477,"targetID":2961486},"2961491":{"id":2961491,"sourceID":2961480,"targetID":2961481},"2961544":{"id":2961544,"sourceID":2961499,"targetID":2961496},"2961545":{"id":2961545,"sourceID":2961475,"targetID":2961473},"2961548":{"id":2961548,"sourceID":2961478,"targetID":2961482},"2961549":{"id":2961549,"sourceID":2961483,"targetID":2961480},"2961550":{"id":2961550,"sourceID":2961482,"targetID":2961477}},"trueConnectors":{"2961489":{"id":2961489,"sourceID":2961486,"targetID":2961476}},"falseConnectors":{"2961488":{"id":2961488,"sourceID":2961486,"targetID":2961479}},"iterationConnectors":{"2961540":{"id":2961540,"sourceID":2961472,"targetID":2961500}},"noteConnectors":{},"notes":{},"variables":{"iteration_id":{"definition":{"name":"iteration_id","type":"DECIMAL","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"0"},"new_start_time":{"definition":{"name":"new_start_time","type":"DATETIME","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"2001-01-01"},"start_time":{"definition":{"name":"start_time","type":"DATETIME","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"2001-01-01"}},"grids":{"v_ticket_events_grid_variables":{"definition":{"name":"v_ticket_events_grid_variables","scope":"BRANCH","definitions":[{"name":"max_created_at","type":"DATETIME"}],"description":"","visibility":"PUBLIC"},"values":[]}}},"info":{"name":"SF_Zendesk_ticket_events_incremental_load_child_job","description":"","type":"ORCHESTRATION","tag":"95aa5eb2-09d7-4fd6-82b2-992302796e3b"}}