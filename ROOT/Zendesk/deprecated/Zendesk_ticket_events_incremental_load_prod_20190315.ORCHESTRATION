{"job":{"components":{"2961261":{"id":2961261,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":16,"y":16,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Zendesk_ticket_events_incremental_load_one_page"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Zendesk_ticket_events_incremental_load_child_job"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[2961262]},"2961296":{"id":2961296,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-144,"y":16,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2961260],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2961298":{"id":2961298,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":1025742816,"x":16,"y":16,"width":32,"height":16,"inputConnectorIDs":[2961260],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2961263],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Loop Iterator 0"}}}},"visible":true},"2":{"slot":2,"name":"Variable to Iterate","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"iteration_id"}}}},"visible":true},"3":{"slot":3,"name":"Starting Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"0"}}}},"visible":true},"4":{"slot":4,"name":"Increment Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true},"5":{"slot":5,"name":"End Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"10"}}}},"visible":true},"6":{"slot":6,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"7":{"slot":7,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[2961262],"inputIterationConnectorIDs":[]},"2961299":{"id":2961299,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":176,"y":16,"width":32,"height":32,"inputConnectorIDs":[2961263],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"append new data to rdl ticket comments table"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DELETE FROM rdl.zendesk_ticket_comments\nWHERE created_at = (\n   SELECT max(created_at) FROM rdl.zendesk_ticket_comments\n)\n;\n\ndrop table if exists prod_zendesk_stg.zendesk_ticket_comments;\n\ncreate TABLE prod_zendesk_stg.zendesk_ticket_comments AS (\nSELECT DISTINCT\n  zte.ticket_id,\n  zte.id as ticket_event_id,\n  zte.child_id as ticket_event_child_id,\n  zte.created_at,\n  zte.child_body as ticket_comment,\n  zte.author_id as author_id,\n  zu.name as author_name\nFROM prod_zendesk.zendesk_tickets_events_incremental as zte\n  JOIN prod_zendesk.zendesk_users zu ON zte.author_id = zu.id\nWHERE zte.created_at > (\n  \t\tSELECT max(created_at) FROM rdl.zendesk_ticket_comments\n\t)\n)\n;\n\nalter table rdl.zendesk_ticket_comments\nappend from prod_zendesk_stg.zendesk_ticket_comments;\n\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{},"failureConnectors":{},"unconditionalConnectors":{"2961260":{"id":2961260,"sourceID":2961296,"targetID":2961298},"2961263":{"id":2961263,"sourceID":2961298,"targetID":2961299}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{"2961262":{"id":2961262,"sourceID":2961298,"targetID":2961261}},"noteConnectors":{},"notes":{},"variables":{"iteration_id":{"definition":{"name":"iteration_id","type":"DECIMAL","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"0"}},"grids":{}},"info":{"name":"Zendesk_ticket_events_incremental_load_prod_20190315","description":"","type":"ORCHESTRATION","tag":"f964d2d3-3891-47c4-bd26-cabeeed8abb2"}}