{"job":{"components":{"2968012":{"id":2968012,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":438858066,"x":-104,"y":-133,"width":32,"height":32,"inputConnectorIDs":[2968014],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Send Alert to Email - Success"}}}},"visible":true},"2":{"slot":2,"name":"AWS Region","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"us-west-2"}}}},"visible":true},"3":{"slot":3,"name":"Topic Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"aspiration-ach-manual-rejections-jobfailed"}}}},"visible":true},"4":{"slot":4,"name":"Subject","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AWS Notification Message"}}}},"visible":true},"5":{"slot":5,"name":"Message","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"Manual ACH Rejections\" Job completed Successfully with Row Count ${ACH_Row_Count}."}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2968013":{"id":2968013,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":438858066,"x":-96,"y":128,"width":32,"height":32,"inputConnectorIDs":[2968011],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Send Alert to Email - Failed"}}}},"visible":true},"2":{"slot":2,"name":"AWS Region","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"us-west-2"}}}},"visible":true},"3":{"slot":3,"name":"Topic Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"aspiration-ach-manual-rejections-jobfailed"}}}},"visible":true},"4":{"slot":4,"name":"Subject","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AWS Notification Message"}}}},"visible":true},"5":{"slot":5,"name":"Message","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"Manual ACH Rejections\" job failed"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2968034":{"id":2968034,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":-1946388514,"x":64,"y":0,"width":32,"height":32,"inputConnectorIDs":[2968015],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of end success"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2968048":{"id":2968048,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-384,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2968009],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Start","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2968049":{"id":2968049,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-96,"y":0,"width":32,"height":32,"inputConnectorIDs":[2968008],"outputSuccessConnectorIDs":[2968014,2968015],"outputFailureConnectorIDs":[2968011],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Row Count","mapTo":"ACH_Row_Count"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Manual_ACH_Rejections_view"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"create or replace file format CSV_FORMAT_1\n  type = 'CSV'\n  field_delimiter = ','\n  comment = 'CSV format for Manual ACH Rejections'\n;\ncopy into '@public.MANUALACH/${output_file_name}'\nfrom (\n\tSELECT * from MANUAL_ACH_REJECTION.MAR.ACH_REJECTION\n    union \n    select TRANSACTION_ID, TRANSfer_date from adw.UDSA.TRANSFER_MANUAL_RULE_AUTOMATION \n    where NEW_RULE=1 and TRANSFER_DATE=current_date-1\n    )\nfile_format = (format_name = CSV_FORMAT_1, compression = NONE)\nSINGLE=true\nheader=true\noverwrite=true\nMAX_FILE_SIZE =167772160\n;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2968050":{"id":2968050,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-256,"y":0,"width":32,"height":32,"inputConnectorIDs":[2968009],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2968008],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Variables"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Udating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\nimport datetime\n\n#add run_history_id to create a unique temp table for parrallel processing\n#context.updateVariable(\"staging_table\", staging_table + str(run_history_id))\n#context.updateVariable(\"batch_filename\", batch_filename + datetime.date.today().strftime('%Y') + datetime.date.today().strftime('%m') + datetime.date.today().strftime('%d') + str(run_history_id) + '.txt')\nfulldate = datetime.datetime.now().strftime('%Y%m%d')\ncontext.updateVariable(\"output_file_year\", fulldate[0:4])\ncontext.updateVariable(\"output_file_month\", fulldate[4:6])\ncontext.updateVariable(\"output_file_day\", fulldate[6:8])\ncontext.updateVariable(\"output_file_name\", output_file_prefix + output_file_year + output_file_month + output_file_day + output_file_suffix)\nprint(\"Full:   \" + fulldate)\nprint(\"Year:   \" + output_file_year)\nprint(\"Month:      \" + output_file_month)\nprint(\"Day:          \" + output_file_day)\nprint(\"Filename: \" + output_file_name)\n\n"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"2968014":{"id":2968014,"sourceID":2968049,"targetID":2968012},"2968015":{"id":2968015,"sourceID":2968049,"targetID":2968034}},"failureConnectors":{"2968011":{"id":2968011,"sourceID":2968049,"targetID":2968013}},"unconditionalConnectors":{"2968008":{"id":2968008,"sourceID":2968050,"targetID":2968049},"2968009":{"id":2968009,"sourceID":2968048,"targetID":2968050}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{},"variables":{"ACH_Row_Count":{"definition":{"name":"ACH_Row_Count","type":"DECIMAL","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"output_file_day":{"definition":{"name":"output_file_day","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"25"},"output_file_month":{"definition":{"name":"output_file_month","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"05"},"output_file_name":{"definition":{"name":"output_file_name","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"python calculated"},"output_file_prefix":{"definition":{"name":"output_file_prefix","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"rejections_current_"},"output_file_suffix":{"definition":{"name":"output_file_suffix","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":".csv"},"output_file_year":{"definition":{"name":"output_file_year","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"2022"}},"grids":{}},"info":{"name":"Manual_ACH_Rejections","description":null,"type":"ORCHESTRATION","tag":"b91d0327-a89a-4c13-8517-bb5af2e5eafe"}}