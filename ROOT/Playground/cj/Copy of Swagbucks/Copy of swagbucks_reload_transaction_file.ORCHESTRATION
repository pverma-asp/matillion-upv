{"job":{"components":{"2957704":{"id":2957704,"inputCardinality":"ZERO","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"NONE","implementationID":814341844,"x":-2,"y":6,"width":32,"height":32,"inputConnectorIDs":[2957725],"outputSuccessConnectorIDs":[2957707],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Queue"}}}},"visible":true},"2":{"slot":2,"name":"etl_run_history_id","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"etl_run_history_id"}}}},"visible":true},"3":{"slot":3,"name":"source_schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${staging_schema}"}}}},"visible":true},"4":{"slot":4,"name":"source_table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${staging_table}"}}}},"visible":true},"5":{"slot":5,"name":"vD01_record_type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"'D'"}}}},"visible":true},"6":{"slot":6,"name":"vD02_record_number","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"record_number"}}}},"visible":true},"7":{"slot":7,"name":"vD03_account_id_type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"'R'"}}}},"visible":true},"8":{"slot":8,"name":"vD04_account_identifier","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"account_identifier"}}}},"visible":true},"9":{"slot":9,"name":"vD05_location_id","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"null"}}}},"visible":true},"10":{"slot":10,"name":"vD06_location_type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"null"}}}},"visible":true},"11":{"slot":11,"name":"vD07_transaction_type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"'A'"}}}},"visible":true},"12":{"slot":12,"name":"vD08_transaction_sub_type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"'PB'"}}}},"visible":true},"13":{"slot":13,"name":"vD09_transaction_amount","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"transaction_amount"}}}},"visible":true},"14":{"slot":14,"name":"vD10_transaction_description","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"'Swagbucks Redemption'"}}}},"visible":true},"15":{"slot":15,"name":"vD11_transaction_identifier","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"transaction_identifier"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957705":{"id":2957705,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-560,"y":80,"width":32,"height":32,"inputConnectorIDs":[2957726],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Views"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DROP VIEW rdl.swagbucks_redemption_status_v;\nCREATE VIEW rdl.swagbucks_redemption_status_v AS\nWITH\nuser_payment_accounts AS (\n    SELECT pa.redemption_code\n  \t\t , upa.account_number AS prn\n  \t\t , upa.user_id\n         , upa.account_type\n         , upa.is_deleted\n         , upa.is_admin_disabled\n         , row_number() over(partition by upa.user_id order by upa.account_type asc nulls last, upa.is_deleted asc, upa.is_admin_disabled asc) as rownum\n    FROM web_db.partnership_account pa\n    LEFT JOIN web_db.user_payment_account upa ON upa.user_id = pa.user_id AND upa.depository_id is not null\n\t)  \nSELECT t.etl_run_history_id\n\t , t.etl_filename\n\t , t.etl_rownum\n\t , t.transaction_identifier\n\t , t.order_id\n\t , upa.user_id\n\t , upa.prn\n\t , t.distribution_amount\n\t , case when gbr.id is not null then 'Complete'\n     \t\twhen gbt.id is not null then 'Pending'\n            else 'Not Sent'\n            end as transaction_status\n     , first_value(case when gbr.d_response_code = '0000' then t.transaction_identifier end) over(partition by t.order_id order by gbr.etl_timestamp asc nulls last, t.transaction_identifier asc nulls last rows between unbounded preceding and unbounded following) as paid_transaction_identifier\n\t , first_value(case when gbr.d_response_code = '0000' then gbr.h_file_transmit_date end) over(partition by t.order_id order by gbr.etl_timestamp asc nulls last, t.transaction_identifier asc nulls last rows between unbounded preceding and unbounded following) as paid_file_transmit_date\n     , first_value(case when gbr.id is null and gbt.id is not null then t.transaction_identifier end) over(partition by t.order_id order by gbr.etl_timestamp asc nulls last, t.transaction_identifier asc nulls last rows between unbounded preceding and unbounded following) as pending_transaction_identifier\n     , sum(1) over(partition by t.order_id, t.etl_filename) as dup_order_id_infile\n     , sum(case when gbr.d_response_code = '0000' then t.distribution_amount end) over(partition by upa.user_id order by gbr.etl_timestamp desc nulls last, t.transaction_identifier asc nulls last rows between 30 preceding and current row) as user_pay_last30trans\n\t , sum(case when gbr.id is null and gbt.id is not null then t.distribution_amount end) over(partition by upa.user_id) as user_pay_pending\n\t , sum(t.distribution_amount) over(partition by upa.user_id, t.etl_filename) as user_amount_infile\n     , case when (t.redemption_code is null \n              OR t.batch_date is null \n              OR t.batch_date is null \n              OR t.order_id is null) \t\t\t\t\t\t\t\t\t\t\tthen 'SB_003'\n            when (coalesce(paid_transaction_identifier,pending_transaction_identifier) is not null \n             and coalesce(paid_transaction_identifier,pending_transaction_identifier) <> t.transaction_identifier)\n              or dup_order_id_infile > 1\t\t\t\t\t\t\t\t\t\tthen 'SB_007'\n     \t\twhen upa.redemption_code is null \t\t\t\t\t\t\t\t\tthen 'SB_001'\n            when (t.distribution_amount < 1 \n              OR t.distribution_amount > 250) \t\t\t\t\t\t\t\t\tthen 'SB_002'\n            when nvl(user_pay_last30trans,0) + nvl(user_pay_pending,0) > 250 \t\n              OR user_amount_infile\t> 250\t\t\t\t\t\t\t\t\t\tthen 'SB_005'\n            when upa.is_deleted or upa.is_admin_disabled \t\t\t\t\t\tthen 'SB_004'\n     \t\telse null end as aspiration_response_code\nFROM rdl.swagbucks_redemption t\nLEFT JOIN user_payment_accounts upa ON upa.redemption_code = t.redemption_code and upa.rownum = 1\nLEFT JOIN rdl.galileo_batch_transaction gbt ON gbt.d_transaction_identifier = t.transaction_identifier\nLEFT JOIN rdl.galileo_batch_response gbr ON gbr.d_transaction_identifier = gbt.d_transaction_identifier;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957708":{"id":2957708,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-560,"y":0,"width":32,"height":32,"inputConnectorIDs":[2957721],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2957720],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Tables"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DROP TABLE IF EXISTS rdl.swagbucks_redemption CASCADE;\nCREATE TABLE rdl.swagbucks_redemption (\n   etl_run_history_id\t\tVARCHAR(256),\n   etl_timestamp\t\t\tTIMESTAMP DEFAULT SYSDATE,\n   etl_filename\t\t\t\tVARCHAR(256),\n   etl_rownum\t\t\t\tBIGINT,\n  \n   redemption_code\t\t\tVARCHAR(256),\n   batch_date\t\t\t\tVARCHAR(256),\n   distribution_amount\t\tDECIMAL(8,4),\n   order_id\t\t\t\t\tVARCHAR(256),\n  \n   transaction_identifier\tVARCHAR(256)\n   );\nALTER TABLE rdl.swagbucks_redemption\n   OWNER TO svc_etl;\n\nDROP TABLE IF EXISTS rdl.swagbucks_response CASCADE;\nCREATE TABLE rdl.swagbucks_response (\n   id\t\t\t\t\t\tBIGINT IDENTITY(0,1),\n   etl_run_history_id\t\tVARCHAR(256),\n   etl_timestamp\t\t\tTIMESTAMP DEFAULT SYSDATE,\n   etl_filename\t\t\t\tVARCHAR(256),\n  \n   file_transmit_date\t\tDATE,\n   transaction_identifier\tVARCHAR(256),\n   response_code\t\t\tVARCHAR(256)\n   );\nALTER TABLE rdl.swagbucks_response\n   OWNER TO svc_etl;\n\nDROP TABLE IF EXISTS rdl.galileo_batch_transaction CASCADE;\nCREATE TABLE IF NOT EXISTS rdl.galileo_batch_transaction (\n   ID\t\t \t\t\t\t\tBIGINT IDENTITY(0,1),\n   ETL_RUN_HISTORY_ID\t\t\tVARCHAR(256),\n   ETL_TIMESTAMP\t\t\t\tTIMESTAMP DEFAULT SYSDATE,\n   D_RECORD_TYPE\t\t\t\tVARCHAR(256),\n   D_RECORD_NUMBER\t\t\t\tVARCHAR(256),\n   D_ACCOUNT_ID_TYPE\t\t\tVARCHAR(256),\n   D_ACCOUNT_IDENTIFIER\t\t\tVARCHAR(256),\n   D_LOCATION_TYPE\t\t\t\tVARCHAR(256),\n   D_LOCATION_ID\t\t\t\tVARCHAR(256),\n   D_TRANSACTION_TYPE\t\t\tVARCHAR(256),\n   D_TRANSACTION_SUB_TYPE\t\tVARCHAR(256),\n   D_TRANSACTION_AMOUNT\t\t\tVARCHAR(256),\n   D_TRANSACTION_DESCRIPTION\tVARCHAR(256),\n   D_TRANSACTION_IDENTIFIER\t\tVARCHAR(256)\n   );\nALTER TABLE rdl.galileo_batch_transaction\n   OWNER TO svc_etl;\n   \nDROP TABLE IF EXISTS rdl.galileo_batch_response CASCADE;\nCREATE TABLE rdl.galileo_batch_response (\n   ID\t\t\t\t\t\tBIGINT IDENTITY(0,1),\n   ETL_RUN_HISTORY_ID \t\tVARCHAR(256),\n   ETL_TIMESTAMP\t\t\tTIMESTAMP DEFAULT SYSDATE,\n   ETL_FILENAME\t\t\t\tVARCHAR(256),\n   H_RECORD_TYPE   \t\t\tVARCHAR(256),\n   H_HEADER   \t\t\t\tVARCHAR(256),\n   H_CLIENT_ID   \t\t\tVARCHAR(256),\n   H_PROGRAM_ID   \t\t\tVARCHAR(256),\n   H_FILE_NAME   \t\t\tVARCHAR(256),\n   H_FILE_TRANSMIT_DATE   \tVARCHAR(256),\n   D_RECORD_TYPE   \t\t\tVARCHAR(256),\n   D_RECORD_NUMBER   \t\tVARCHAR(256),\n   D_ACCOUNT_ID_TYPE   \t\tVARCHAR(256),\n   D_ACCOUNT_IDENTIFIER   \tVARCHAR(256),\n   D_TRANSACTION_IDENTIFIER VARCHAR(256),\n   D_RESPONSE_CODE   \t\tVARCHAR(256),\n   T_RECORD_TYPE   \t\t\tVARCHAR(256),\n   T_TRAILER   \t\t\t\tVARCHAR(256),\n   T_COUNT   \t\t\t\tVARCHAR(256)\n   );\nALTER TABLE rdl.galileo_batch_response\n   OWNER TO svc_etl;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957709":{"id":2957709,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-640,"y":0,"width":32,"height":32,"inputConnectorIDs":[2957720],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Clear"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Truncate rdl.swagbucks_redemption;\nTruncate rdl.galileo_batch_transaction;\nTruncate rdl.galileo_batch_response;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957710":{"id":2957710,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-80,"y":0,"width":32,"height":32,"inputConnectorIDs":[2957706],"outputSuccessConnectorIDs":[2957725],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Batch"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DROP TABLE IF EXISTS ${staging_schema}.${staging_table};\nCREATE TABLE ${staging_schema}.${staging_table} AS\n\tSELECT t.etl_run_history_id\t\t\t\t\t\t\t::VARCHAR AS etl_run_history_id\n    \t, row_number() over(order by t.etl_rownum asc)  ::VARCHAR AS record_number\n\t\t, t.prn\t\t\t\t\t\t\t\t\t\t\t::VARCHAR AS account_identifier\n\t\t, ('-' || t.distribution_amount)\t\t\t\t::VARCHAR AS transaction_amount\n\t\t, t.transaction_identifier\t\t\t\t\t\t::VARCHAR AS transaction_identifier\n\tFROM rdl.swagbucks_redemption_status_v t\n\tWHERE t.etl_run_history_id = '${run_history_id}'\n      AND t.aspiration_response_code is null\n      AND t.transaction_status = 'Not Sent';\nALTER TABLE ${staging_schema}.${staging_table}\n   OWNER TO svc_etl;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957711":{"id":2957711,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-320,"y":0,"width":32,"height":32,"inputConnectorIDs":[2957702],"outputSuccessConnectorIDs":[2957703],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Stage"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DROP TABLE IF EXISTS ${staging_schema}.${staging_table};\nCREATE TABLE ${staging_schema}.${staging_table} (\n   rownum\t\t\t\t\tBIGINT IDENTITY(0,1),\n  \n   redemption_code\t\t\tVARCHAR(256),\n   batch_date\t\t\t\tVARCHAR(256),\n   distribution_amount\t\tVARCHAR(256),\n   order_id\t\t\t\t\tVARCHAR(256)\n   );\nALTER TABLE ${staging_schema}.${staging_table}\n   OWNER TO svc_etl;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957744":{"id":2957744,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-160,"y":0,"width":32,"height":32,"inputConnectorIDs":[2957701],"outputSuccessConnectorIDs":[2957706],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Store"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"INSERT INTO rdl.swagbucks_redemption\nSELECT '${run_history_id}' as etl_run_history_id\n\t , sysdate as etl_timestamp\n\t , '${input_filename}' as etl_filename\n     , row_number() over(order by rownum asc) as etl_rownum\n\t , nullif(trim(redemption_code),'') as redemption_code\n\t , nullif(trim(batch_date),'') as batch_date\n\t , nullif(trim(distribution_amount),'')::DECIMAL(8,4) as distribution_amount\n\t , nullif(trim(order_id),'') as order_id\n     , 'SR_'||'${run_history_id}'||'-'||lpad(${file_number}::varchar,2,'0')||'-'||lpad(etl_rownum::varchar,5,'0') as transaction_identifier\nFROM ${staging_schema}.${staging_table};"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957745":{"id":2957745,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":80,"y":0,"width":32,"height":32,"inputConnectorIDs":[2957707],"outputSuccessConnectorIDs":[2957724],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Cleanup"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DROP TABLE IF EXISTS ${staging_schema}.${staging_table};"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957746":{"id":2957746,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":-1946388514,"x":160,"y":0,"width":32,"height":32,"inputConnectorIDs":[2957724],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957747":{"id":2957747,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-400,"y":0,"width":32,"height":32,"inputConnectorIDs":[2957727],"outputSuccessConnectorIDs":[2957702],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Variables"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Udating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\nimport datetime\n\n#add run_history_id to create a unique temp table for parrallel processing\ncontext.updateVariable(\"staging_table\", staging_table + str(run_history_id))\n\n#add YYYYMMDD to batch_filename varible \n#add value in batch_filename_sequence variable\n#Note: date calc rolls to next day when processed after 5pm MT or 4pm PT (Galileo is no longer processing at this time)\n#context.updateVariable(\"batch_filename\", batch_filename + datetime.date.today().strftime('%Y') + datetime.date.today().strftime('%m') + datetime.date.today().strftime('%d') + str(run_history_id) + '.txt')"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957748":{"id":2957748,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":773867971,"x":-240,"y":0,"width":32,"height":32,"inputConnectorIDs":[2957703],"outputSuccessConnectorIDs":[2957701],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Load"}}}},"visible":true},"4":{"slot":4,"name":"S3 Object Prefix","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${input_filename}"}}}},"visible":true},"7":{"slot":7,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${staging_schema}"}}}},"visible":true},"8":{"slot":8,"name":"Target Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${staging_table}"}}}},"visible":true},"9":{"slot":9,"name":"Load Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"redemption_code"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"batch_date"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"distribution_amount"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"order_id"}}}},"visible":true},"23":{"slot":23,"name":"Date Format","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"auto"}}}},"visible":true},"24":{"slot":24,"name":"Time Format","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"auto"}}}},"visible":true},"26":{"slot":26,"name":"","elements":{},"visible":false},"27":{"slot":27,"name":"Escape","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2957750":{"id":2957750,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-480,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2957721,2957726,2957727],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"2957701":{"id":2957701,"sourceID":2957748,"targetID":2957744},"2957702":{"id":2957702,"sourceID":2957747,"targetID":2957711},"2957703":{"id":2957703,"sourceID":2957711,"targetID":2957748},"2957706":{"id":2957706,"sourceID":2957744,"targetID":2957710},"2957707":{"id":2957707,"sourceID":2957704,"targetID":2957745},"2957724":{"id":2957724,"sourceID":2957745,"targetID":2957746},"2957725":{"id":2957725,"sourceID":2957710,"targetID":2957704}},"failureConnectors":{},"unconditionalConnectors":{"2957720":{"id":2957720,"sourceID":2957708,"targetID":2957709},"2957721":{"id":2957721,"sourceID":2957750,"targetID":2957708},"2957726":{"id":2957726,"sourceID":2957750,"targetID":2957705},"2957727":{"id":2957727,"sourceID":2957750,"targetID":2957747}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{"2957728":{"id":2957728,"x":-70,"y":310,"width":382,"height":89,"text":"**``TRAILER``**\n\n0**\tCOLUMN .         L    S    E    VALUE        REQ**\n1  RECORD_TYPE   1    1    1    \"T\"               Y\n2  TRAILER              7    2    8    \"TRAILER\"   Y\n3  COUNT               6    9    14   999999       Y","colour":"e6e63c"},"2957729":{"id":2957729,"x":-471,"y":201,"width":382,"height":198,"text":"**``DETAIL``**\n\n0**   COLUMN                                       L      S       E      VALUE           REQ**\n1    RECORD_TYPE                               1     1       1      \"D\"                   Y\n2    RECORD_NUMBER                        6     2       7      999999           Y\n3    ACCOUNT_ID_TYPE                      1      8       8      R                      Y\n4    ACCOUNT_IDENTIFIER                 50    9      58    PRN                 Y\n5    LOCATION_ID                                1      59    59                             N\n6    LOCATION_TYPE                           20    60    79                             N\n7    TRANSACTION_TYPE                    1      80    80     var                   Y\n8    TRANSACTION_SUB_TYPE           3      81    83                             N\n9    TRANSACTION_AMOUNT            13    84    96    1234567891   Y\n10  TRANSACTION_DESCRIPTION    40    97    136   var                  N\n11  TRANSACTION_IDENTIFIER         20    137  156                          N","colour":"e6e63c"},"2957730":{"id":2957730,"x":-100,"y":-78,"width":40,"height":112,"text":"","colour":"f9c21b"},"2957731":{"id":2957731,"x":-72,"y":162,"width":382,"height":129,"text":"**``HEADER``**\n\n0**  COLUMN                        L      S     E      VAL                   REQ**\n1   RECORD_TYPE                1      1     1      \"H\"                    Y\n2   HEADER                           6      2     7      \"HEADER\"        Y\n3   CLIENT_ID                       10    8     17    454                    Y\n4   PROGRAM_ID                 10   18    27    584\n5   FILE_NAME                      50   28   77    var                     Y\n6   FILE_TRANSMIT_DATE   8     78   85    MMDDYYYY      Y","colour":"e6e63c"},"2957734":{"id":2957734,"x":-479,"y":152,"width":799,"height":256,"text":"**``BATCH FILE LAYOUT``**","colour":"f9c21b"},"2957735":{"id":2957735,"x":-21,"y":-20,"width":40,"height":179,"text":"","colour":"f9c21b"},"2957749":{"id":2957749,"x":-266,"y":-119,"width":207,"height":67,"text":"Record set sent for batch file. Columns from this temp table is mapped into batch trans shared job.","colour":"f9c21b"}},"variables":{"file_number":{"definition":{"name":"file_number","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"input_bucket":{"definition":{"name":"input_bucket","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"aspiration-datateam/dump/cjohnson/swagbucks/redemptions"},"input_filename":{"definition":{"name":"input_filename","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"passed_variable"},"staging_table":{"definition":{"name":"staging_table","type":"TEXT","scope":"BRANCH","description":"","visibility":"PRIVATE"},"value":"tmp_swagbucks"}},"grids":{}},"info":{"name":"Copy of swagbucks_reload_transaction_file","description":"","type":"ORCHESTRATION","tag":"112badad-753e-41f9-9fb4-ba2be69a6bb1"}}