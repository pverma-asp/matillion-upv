{"job":{"components":{"2959042":{"id":2959042,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":0,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2959081],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2959043":{"id":2959043,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":128,"y":64,"width":32,"height":32,"inputConnectorIDs":[2959081],"outputSuccessConnectorIDs":[2959086],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"load dispute table"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DROP TABLE if exists etl.dispute_20220202;\n\nCREATE TABLE if not exists etl.dispute_20220202 (\n  prn varchar(255),\n  credit_amount numeric(35,4)\n)\n;\n\n-- truncate etl.dispute_20220202;\n\ninsert into etl.dispute_20220202 (prn, credit_amount)\nvalues ('223117185775', -1.00)\n;\n\n-- copy etl.charge_offs_20200211\n-- from 's3://aspiration-datateam/dump/jchen/charge_offs/Final_Charge-off_list_Data_Eng_Clean.csv'\n-- iam_role 'arn:aws:iam::332894900161:role/RedshiftClusterRole'\n-- delimiter ','\n-- IGNOREHEADER 1\n-- removequotes\n-- ;\n\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2959084":{"id":2959084,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":144,"y":293,"width":32,"height":32,"inputConnectorIDs":[2959087],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Send_File_to_Galileo 0"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Send_File_to_Galileo"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"galileo_filename"},"2":{"slot":2,"type":"STRING","value":"${galileo_filename}"}}}},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2959085":{"id":2959085,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":144,"y":192,"width":32,"height":32,"inputConnectorIDs":[2959086],"outputSuccessConnectorIDs":[2959087],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"create galileo btrans table"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"UPDATE etl.galileo_transaction_batch_header\nSET filename = '${galileo_filename}.gpg',\nfiletransmitdate = '02022022'\nWHERE recordtype = 'H'\n;\n\n\ndelete from etl.galileo_transaction_batch_detail;\ninsert into etl.galileo_transaction_batch_detail(recordtype,\nrecordnumber, accountidtype, accountidentifier, transactiontype,\ntransactionsubtype, transactionamount, transactiondescription, transactionidentifier)\nSELECT\n    'D' as recordtype\n     , row_number() over(order by prn) as recordnumber\n     , 'R' as accountidtype\n     ,  prn as accountidentifier\n     , 'A' as transactiontype\n     , 'tc' as transactionsubtype\n     ,  replace(credit_amount, '$', '')::numeric(18,2)::varchar(100) as transactionamount\n     , 'ASP-Dispute Credit' as transactiondescription\n     , 'DCT_220202T-' || lpad(row_number() over(order by prn), 5, '0') as transactionidentifier\nFROM etl.dispute_20220202\nWHERE 1=1\n--  AND prn=223101791042\n;\n\n\nUPDATE etl.galileo_transaction_batch_trailer\nSET \"count\" = (SELECT count(1) from etl.galileo_transaction_batch_detail)\nWHERE recordtype = 'T'\n;\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"2959086":{"id":2959086,"sourceID":2959043,"targetID":2959085},"2959087":{"id":2959087,"sourceID":2959085,"targetID":2959084}},"failureConnectors":{},"unconditionalConnectors":{"2959081":{"id":2959081,"sourceID":2959042,"targetID":2959043}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{},"variables":{"galileo_filename":{"definition":{"name":"galileo_filename","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"btrans_584_20220202_028.txt"}},"grids":{}},"info":{"name":"20220201_dispute_test","description":"","type":"ORCHESTRATION","tag":"73d2f0d4-1dbf-459f-a7fa-dbb753e7d5f6"}}