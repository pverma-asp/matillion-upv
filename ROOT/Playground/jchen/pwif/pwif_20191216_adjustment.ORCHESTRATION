{"job":{"components":{"2958981":{"id":2958981,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":160,"y":-16,"width":32,"height":32,"inputConnectorIDs":[2958983],"outputSuccessConnectorIDs":[2958980],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"import adjustment file"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATE TABLE if not exists etl.pwif_adjustment_20191216 (\n  prn varchar(255),\n  name varchar(255),\n  pwif_amount numeric(8,2)\n)\n;\n\n-- truncate etl.pwif_adjustment_20191216;\n\ncopy etl.pwif_adjustment_20191216\nfrom 's3://aspiration-datateam/dump/jchen/pwif/20191216_Courtesy_PWIF_Rebate_Clean.csv'\niam_role 'arn:aws:iam::332894900161:role/RedshiftClusterRole'\ndelimiter ','\nIGNOREHEADER 1\n-- removequotes\n;\n\n\n-- delete from etl.pwif_internal_employees_20191001\n-- where email='jay.j.zheng@gmail.com' and device=''\n-- ;\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2958986":{"id":2958986,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":144,"y":80,"width":32,"height":32,"inputConnectorIDs":[2958980],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create galileo file"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"UPDATE etl.galileo_transaction_batch_header\nSET filename = 'btrans_584_20191216_018.txt.gpg',\nfiletransmitdate = '12162019'\nWHERE recordtype = 'H'\n;\n\n\ndelete from etl.galileo_transaction_batch_detail;\ninsert into etl.galileo_transaction_batch_detail(recordtype,\nrecordnumber, accountidtype, accountidentifier, transactiontype,\ntransactionsubtype, transactionamount, transactiondescription, transactionidentifier)\nselect 'D' as recordtype\n     , row_number() over(order by prn) as recordnumber\n     , 'R' as accountidtype\n     ,  prn as accountidentifier\n     , 'A' as transactiontype\n     , 'Y' as transactionsubtype\n     ,  pwif_amount::numeric(18,2)::varchar(100) as transactionamount\n     , 'Courtesy PWIF Rebate' as transactiondescription\n     , 'PW_191216-' || lpad(row_number() over(order by prn) + 1, 5, '0') as transactionidentifier\nfrom etl.pwif_adjustment_20191216 pj\nWHERE 1=1\n  AND name not ILIKE '%test%'\n;\n\n\nUPDATE etl.galileo_transaction_batch_trailer\nSET \"count\" = (SELECT count(1) from etl.galileo_transaction_batch_detail)\nWHERE recordtype = 'T'\n;\n\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"2958987":{"id":2958987,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":0,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[2958983],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"2958980":{"id":2958980,"sourceID":2958981,"targetID":2958986}},"failureConnectors":{},"unconditionalConnectors":{"2958983":{"id":2958983,"sourceID":2958987,"targetID":2958981}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{},"variables":{},"grids":{}},"info":{"name":"pwif_20191216_adjustment","description":"","type":"ORCHESTRATION","tag":"e64448e0-8020-4555-bafd-5fa99a11503c"}}